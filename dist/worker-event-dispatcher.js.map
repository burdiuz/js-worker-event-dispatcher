{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bc9de96a355ff2d75024","webpack:///./source/WorkerType.js","webpack:///./source/WorkerEvent.js","webpack:///./node_modules/event-dispatcher/dist/event-dispatcher.js","webpack:///./source/AbstractDispatcher.js","webpack:///./source/sharedWorker/ClientDispatcher.js","webpack:///./source/DedicatedWorkerDispatcher.js","webpack:///./source/SharedWorkerDispatcher.js","webpack:///./source/sharedWorker/ServerDispatcher.js","webpack:///./source/index.js","webpack:///./node_modules/messageport-dispatcher/dist/messageport-dispatcher.js","webpack:///./source/utils/create.js"],"names":["WorkerType","DEDICATED_WORKER","SHARED_WORKER","SHARED_WORKER_SERVER","SHARED_WORKER_CLIENT","NativeEventTypes","CONNECT","MESSAGE","ERROR","LANGUAGECHANGE","ONLINE","OFFLINE","WorkerEvent","type","data","sourceEvent","client","getWorkerEventType","dispatchWorkerEvent","source","target","eventType","handler","event","hasEventListener","dispatchEvent","addEventListener","dispatchWorkerEvents","dispatchWorkerErrorEvent","AbstractDispatcher","customPostMessageHandler","receiverEventPreprocessor","senderEventPreprocessor","postMessageHandler","targetOrigin","transferList","postMessage","ClientDispatcher","initialize","start","close","getTarget","worker","self","isObject","Worker","String","DedicatedWorkerDispatcher","receiver","terminate","name","SharedWorker","SharedWorkerDispatcher","port","ServerDispatcher","clientReceiverEventPreprocessor","clientSenderEventPreprocessor","handleConnect","removeEventListener","removeAllEventListeners","ports","CONNECT_EVENT","create","createForSelf","dispatcher"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,+BAA+B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA,CAAC;;AAED;;AAEA;;AAEA,OAAO;AACP;AACA,CAAC;AACD,4C;;;;;;;;;;;;;;;;;ACjcA;;;;;;;;;;;;AAEA;;;;;;;;;IASMiB,kB;;;A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CA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA,8DAA8D,+DAA+D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA,CAAC;AACD;;AAEA,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE,GAAG;AACpjB;AACA;AACA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB,sCAAsC,UAAU;AAChD;AACA,uCAAuC,UAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB,iBAAiB;AACjB;;AAEA,GAAG;AACH;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;;AAEA;;AAEA,OAAO;AACP;AACA;;AAEA;AACA,8CAA8C;;AAE9C,qGAAqG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE3Q;AACA,oJAAoJ;AACpJ;AACA;AACA,qGAAqG,iIAAiI;AACtO,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;;AAEA;;AAEA;AACA,8CAA8C;AAC9C;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,yBAAyB,kBAAkB;AAC3C,sCAAsC,uDAAuD,+BAA+B,sDAAsD;AAClL;AACA,SAAS;AACT,8EAA8E,4DAA4D;AAC1I;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,+BAA+B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA,OAAO;;AAEP;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA,4BAA4B;;AAE5B,OAAO;AACP;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA,CAAC;AACD,kD;;;;;;;;;;;;;;ACr1BA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;AAQO,IAAMe,0BAAS,SAATA,MAAS,CAAC1C,MAAD,EAASP,IAAT,EAAekB,yBAAf,EAA0CC,uBAA1C,EAAsE;AAC1F,MAAIgC,aAAa,IAAjB;AACA,UAAQnD,IAAR;AACE;AACA,SAAK,qBAAWZ,gBAAhB;AACE+D,mBAAa,wCACX5C,MADW,EAEXW,yBAFW,EAGXC,uBAHW,CAAb;AAKA;AACF,SAAK,qBAAW9B,aAAhB;AACE8D,mBAAa,qCACX5C,MADW,EAEX,IAFW,EAGXW,yBAHW,EAIXC,uBAJW,CAAb;AAMA;AACF,SAAK,qBAAW7B,oBAAhB;AACE6D,mBAAa,+BACX5C,MADW,EAEXW,yBAFW,CAAb;AAIA;AACF,SAAK,qBAAW3B,oBAAhB;AACE4D,mBAAa,+BACX5C,MADW,EAEXW,yBAFW,EAGXC,uBAHW,CAAb;AAKA;AA7BJ;AA+BA,SAAOgC,UAAP;AACD,CAlCM;;AAoCP;;;;;;AAMO,IAAMD,wCAAgB,SAAhBA,aAAgB,CAAChC,yBAAD,EAA4BC,uBAA5B,EAAwD;AACnF;AACA,MAAIgC,aAAa,IAAjB;AACA,MAAI,OAAQrB,KAAKP,WAAb,KAA8B,UAAlC,EAA8C;AAC5C4B,iBAAa,wCACXrB,IADW,EAEXZ,yBAFW,EAGXC,uBAHW,CAAb;AAKD,GAND,MAMO;AACLgC,iBAAa,+BACXrB,IADW,EAEXZ,yBAFW,CAAb;AAID;AACD,SAAOiC,UAAP;AACA;AACD,CAjBM,C","file":"worker-event-dispatcher.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WorkerEventDispatcher\"] = factory();\n\telse\n\t\troot[\"WorkerEventDispatcher\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:8081/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bc9de96a355ff2d75024","const WorkerType = {\r\n  DEDICATED_WORKER: 'dedicated',\r\n  SHARED_WORKER: 'shared',\r\n  /**\r\n   * @private\r\n   */\r\n  SHARED_WORKER_SERVER: 'sharedServer',\r\n  /**\r\n   * @private\r\n   */\r\n  SHARED_WORKER_CLIENT: 'sharedClient',\r\n};\r\n\r\nexport default WorkerType;\n\n\n\n// WEBPACK FOOTER //\n// ./source/WorkerType.js","import { Event } from 'event-dispatcher';\r\n\r\nexport const NativeEventTypes = {\r\n  CONNECT: 'connect',\r\n  MESSAGE: 'message',\r\n  ERROR: 'error',\r\n  LANGUAGECHANGE: 'languagechange',\r\n  ONLINE: 'online',\r\n  OFFLINE: 'offline',\r\n};\r\n\r\nclass WorkerEvent extends Event {\r\n  static CONNECT = 'worker:connect';\r\n  static MESSAGE = 'worker:message';\r\n  static ERROR = 'worker:error';\r\n  static LANGUAGECHANGE = 'worker:languagechange';\r\n  static ONLINE = 'worker:online';\r\n  static OFFLINE = 'worker:offline';\r\n\r\n  constructor(type, data, sourceEvent, client) {\r\n    super(type, data);\r\n    this.sourceEvent = sourceEvent;\r\n    this.client = client;\r\n  }\r\n}\r\n\r\nexport const getWorkerEventType = (type) => {\r\n  switch (type) {\r\n    case NativeEventTypes.CONNECT:\r\n      return WorkerEvent.CONNECT;\r\n    case NativeEventTypes.MESSAGE:\r\n      return WorkerEvent.MESSAGE;\r\n    case NativeEventTypes.ERROR:\r\n      return WorkerEvent.ERROR;\r\n    case NativeEventTypes.LANGUAGECHANGE:\r\n      return WorkerEvent.LANGUAGECHANGE;\r\n    case NativeEventTypes.ONLINE:\r\n      return WorkerEvent.ONLINE;\r\n    case NativeEventTypes.OFFLINE:\r\n      return WorkerEvent.OFFLINE;\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nexport const dispatchWorkerEvent = (type, source, target) => {\r\n  const eventType = getWorkerEventType(type);\r\n  const handler = (event) => {\r\n    if (target.hasEventListener(eventType)) {\r\n      target.dispatchEvent(new WorkerEvent(eventType, event, event));\r\n    }\r\n  };\r\n\r\n  source.addEventListener(type, handler);\r\n  return handler;\r\n};\r\n\r\nexport const dispatchWorkerEvents = (source, target) => {\r\n  dispatchWorkerEvent(NativeEventTypes.ERROR, source, target);\r\n  dispatchWorkerEvent(NativeEventTypes.LANGUAGECHANGE, source, target);\r\n  dispatchWorkerEvent(NativeEventTypes.ONLINE, source, target);\r\n  dispatchWorkerEvent(NativeEventTypes.OFFLINE, source, target);\r\n};\r\n\r\nexport const dispatchWorkerErrorEvent = (source, target) => {\r\n  dispatchWorkerEvent(NativeEventTypes.ERROR, source, target);\r\n};\r\n\r\nexport default WorkerEvent;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/WorkerEvent.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"EventDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"EventDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.Event = undefined;\r\n\r\nvar _EventDispatcher = __webpack_require__(1);\r\n\r\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = _EventDispatcher2.default;\r\nexports.Event = _EventDispatcher.Event;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar hasOwnProp = function hasOwnProp(target, name) {\r\n  return Object.prototype.hasOwnProperty.call(target, name);\r\n}; /**\r\n    * Created by Oleg Galaburda on 09.02.16.\r\n    * \r\n    */\r\n\r\nvar Event = exports.Event = function () {\r\n  function Event(type, data) {\r\n    _classCallCheck(this, Event);\r\n\r\n    this.type = type;\r\n    this.data = data || null;\r\n    this.defaultPrevented = false;\r\n  }\r\n\r\n  _createClass(Event, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return { type: this.type, data: this.data };\r\n    }\r\n  }, {\r\n    key: 'isDefaultPrevented',\r\n    value: function isDefaultPrevented() {\r\n      return this.defaultPrevented;\r\n    }\r\n  }, {\r\n    key: 'preventDefault',\r\n    value: function preventDefault() {\r\n      this.defaultPrevented = true;\r\n    }\r\n  }]);\r\n\r\n  return Event;\r\n}();\r\n\r\nvar ListenersRunner = function () {\r\n  function ListenersRunner(listeners, onStopped, onComplete) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, ListenersRunner);\r\n\r\n    this.index = -1;\r\n    this.immediatelyStopped = false;\r\n\r\n    this.stopImmediatePropagation = function () {\r\n      _this.immediatelyStopped = true;\r\n    };\r\n\r\n    this.listeners = listeners;\r\n    this.onStopped = onStopped;\r\n    this.onComplete = onComplete;\r\n  }\r\n\r\n  _createClass(ListenersRunner, [{\r\n    key: 'run',\r\n    value: function run(event, target) {\r\n      var listener = void 0;\r\n      var listeners = this.listeners;\r\n\r\n      this.augmentEvent(event);\r\n      // TODO this has to be handled in separate object ListenersRunner that should be\r\n      // created for each call() call and asked for index validation on each listener remove.\r\n      for (this.index = 0; this.index < listeners.length; this.index++) {\r\n        if (this.immediatelyStopped) break;\r\n        listener = listeners[this.index];\r\n        listener.call(target, event);\r\n      }\r\n      this.clearEvent(event);\r\n      this.onComplete(this);\r\n    }\r\n  }, {\r\n    key: 'augmentEvent',\r\n    value: function augmentEvent(eventObject) {\r\n      var event = eventObject;\r\n      event.stopPropagation = this.onStopped;\r\n      event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n    }\r\n\r\n    /* eslint class-methods-use-this: \"off\" */\r\n\r\n  }, {\r\n    key: 'clearEvent',\r\n    value: function clearEvent(eventObject) {\r\n      var event = eventObject;\r\n      delete event.stopPropagation;\r\n      delete event.stopImmediatePropagation;\r\n    }\r\n  }, {\r\n    key: 'listenerRemoved',\r\n    value: function listenerRemoved(listeners, index) {\r\n      if (listeners === this.listeners && index <= this.index) {\r\n        this.index--;\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return ListenersRunner;\r\n}();\r\n\r\nvar EventListeners = function () {\r\n  function EventListeners() {\r\n    var _this2 = this;\r\n\r\n    _classCallCheck(this, EventListeners);\r\n\r\n    this._listeners = {};\r\n    this._runners = [];\r\n\r\n    this.removeRunner = function (runner) {\r\n      _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n    };\r\n  }\r\n  /**\r\n   * key - event Type\r\n   * value - hash of priorities\r\n   *    key - priority\r\n   *    value - list of handlers\r\n   * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventListeners, [{\r\n    key: 'createList',\r\n    value: function createList(eventType, priorityOpt) {\r\n      var priority = parseInt(priorityOpt, 10);\r\n      var target = this.getPrioritiesByKey(eventType);\r\n      var key = String(priority);\r\n      var value = void 0;\r\n      if (hasOwnProp(target, key)) {\r\n        value = target[key];\r\n      } else {\r\n        value = [];\r\n        target[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'getPrioritiesByKey',\r\n    value: function getPrioritiesByKey(key) {\r\n      var value = void 0;\r\n      if (hasOwnProp(this._listeners, key)) {\r\n        value = this._listeners[key];\r\n      } else {\r\n        value = {};\r\n        this._listeners[key] = value;\r\n      }\r\n      return value;\r\n    }\r\n  }, {\r\n    key: 'add',\r\n    value: function add(eventType, handler, priority) {\r\n      var handlers = this.createList(eventType, priority);\r\n      if (handlers.indexOf(handler) < 0) {\r\n        handlers.push(handler);\r\n      }\r\n    }\r\n  }, {\r\n    key: 'has',\r\n    value: function has(eventType) {\r\n      var priority = void 0;\r\n      var result = false;\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        for (priority in priorities) {\r\n          if (hasOwnProp(priorities, priority)) {\r\n            result = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'remove',\r\n    value: function remove(eventType, handler) {\r\n      var _this3 = this;\r\n\r\n      var priorities = this.getPrioritiesByKey(eventType);\r\n      if (priorities) {\r\n        var list = Object.getOwnPropertyNames(priorities);\r\n        var length = list.length;\r\n\r\n        var _loop = function _loop(index) {\r\n          var priority = list[index];\r\n          var handlers = priorities[priority];\r\n          var handlerIndex = handlers.indexOf(handler);\r\n          if (handlerIndex >= 0) {\r\n            handlers.splice(handlerIndex, 1);\r\n            if (!handlers.length) {\r\n              delete priorities[priority];\r\n            }\r\n            _this3._runners.forEach(function (runner) {\r\n              runner.listenerRemoved(handlers, handlerIndex);\r\n            });\r\n          }\r\n        };\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          _loop(index);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: 'removeAll',\r\n    value: function removeAll(eventType) {\r\n      delete this._listeners[eventType];\r\n    }\r\n  }, {\r\n    key: 'createRunner',\r\n    value: function createRunner(handlers, onStopped) {\r\n      var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n      this._runners.push(runner);\r\n      return runner;\r\n    }\r\n  }, {\r\n    key: 'call',\r\n    value: function call(event, target) {\r\n      var priorities = this.getPrioritiesByKey(event.type);\r\n      var stopped = false;\r\n      var stopPropagation = function stopPropagation() {\r\n        stopped = true;\r\n      };\r\n      if (priorities) {\r\n        // getOwnPropertyNames() or keys()?\r\n        var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n          return a - b;\r\n        });\r\n        var length = list.length;\r\n\r\n        for (var index = 0; index < length; index++) {\r\n          if (stopped) break;\r\n          var _handlers = priorities[list[index]];\r\n          // in case if all handlers of priority were removed while event\r\n          // was dispatched and handlers become undefined.\r\n          if (_handlers) {\r\n            var _runner = this.createRunner(_handlers, stopPropagation);\r\n            _runner.run(event, target);\r\n            if (_runner.immediatelyStopped) break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventListeners;\r\n}();\r\n\r\nvar EventDispatcher = function () {\r\n  function EventDispatcher(eventPreprocessor) {\r\n    var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n    _classCallCheck(this, EventDispatcher);\r\n\r\n    if (!noInit) {\r\n      this.initialize(eventPreprocessor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(EventDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize(eventPreprocessor) {\r\n      this._eventPreprocessor = eventPreprocessor;\r\n      this._listeners = new EventListeners();\r\n    }\r\n  }, {\r\n    key: 'addEventListener',\r\n    value: function addEventListener(eventType, listener) {\r\n      var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n      this._listeners.add(eventType, listener, -priority || 0);\r\n    }\r\n  }, {\r\n    key: 'hasEventListener',\r\n    value: function hasEventListener(eventType) {\r\n      return this._listeners.has(eventType);\r\n    }\r\n  }, {\r\n    key: 'removeEventListener',\r\n    value: function removeEventListener(eventType, listener) {\r\n      this._listeners.remove(eventType, listener);\r\n    }\r\n  }, {\r\n    key: 'removeAllEventListeners',\r\n    value: function removeAllEventListeners(eventType) {\r\n      this._listeners.removeAll(eventType);\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(event, data) {\r\n      var eventObject = EventDispatcher.getEvent(event, data);\r\n      if (this._eventPreprocessor) {\r\n        eventObject = this._eventPreprocessor.call(this, eventObject);\r\n      }\r\n      this._listeners.call(eventObject);\r\n    }\r\n  }], [{\r\n    key: 'isObject',\r\n    value: function isObject(value) {\r\n      return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n    }\r\n  }, {\r\n    key: 'getEvent',\r\n    value: function getEvent(eventOrType, optionalData) {\r\n      var event = eventOrType;\r\n      if (!EventDispatcher.isObject(eventOrType)) {\r\n        event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n      }\r\n      return event;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(eventPreprocessor) {\r\n      return new EventDispatcher(eventPreprocessor);\r\n    }\r\n\r\n    /* eslint no-undef: \"off\" */\r\n\r\n  }]);\r\n\r\n  return EventDispatcher;\r\n}();\r\n\r\nEventDispatcher.Event = Event;\r\n\r\nexports.default = EventDispatcher;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/event-dispatcher/dist/event-dispatcher.js\n// module id = 2\n// module chunks = 0","import MessagePortDispatcher from 'messageport-dispatcher';\r\n\r\n/**\r\n *\r\n * @param target {String|Worker}\r\n * @param type {String}\r\n * @param receiverEventPreprocessor {?Function}\r\n * @param senderEventPreprocessor {?Function}\r\n * @extends MessagePortDispatcher\r\n * @constructor\r\n */\r\nclass AbstractDispatcher extends MessagePortDispatcher {\r\n  constructor(type) {\r\n    super(null, null, null, null, true);\r\n    this.type = type;\r\n  }\r\n\r\n  initialize(\r\n    target,\r\n    customPostMessageHandler = null,\r\n    receiverEventPreprocessor = null,\r\n    senderEventPreprocessor = null,\r\n  ) {\r\n    const postMessageHandler = (data, targetOrigin, transferList) =>\r\n      target.postMessage(data, transferList);\r\n\r\n    super.initialize(\r\n      target,\r\n      customPostMessageHandler || postMessageHandler,\r\n      receiverEventPreprocessor,\r\n      senderEventPreprocessor,\r\n    );\r\n  }\r\n}\r\n\r\nexport default AbstractDispatcher;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/AbstractDispatcher.js","import WorkerType from '../WorkerType';\r\nimport AbstractDispatcher from '../AbstractDispatcher';\r\n\r\n/**\r\n * @param target {MessagePort}\r\n * @param receiverEventPreprocessor {?Function}\r\n * @param senderEventPreprocessor {?Function}\r\n * @extends MessagePortDispatcher\r\n * @constructor\r\n */\r\nclass ClientDispatcher extends AbstractDispatcher {\r\n  constructor(target, receiverEventPreprocessor, senderEventPreprocessor) {\r\n    super(WorkerType.SHARED_WORKER_CLIENT);\r\n\r\n    this.initialize(target, null, receiverEventPreprocessor, senderEventPreprocessor);\r\n  }\r\n\r\n  start() {\r\n    this.target.start();\r\n  }\r\n\r\n  close() {\r\n    this.target.close();\r\n  }\r\n}\r\n\r\nexport default ClientDispatcher;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/sharedWorker/ClientDispatcher.js","import EventDispatcher from 'event-dispatcher';\r\nimport WorkerType from './WorkerType';\r\nimport { dispatchWorkerEvents } from './WorkerEvent';\r\nimport AbstractDispatcher from './AbstractDispatcher';\r\n\r\nconst getTarget = (worker) => {\r\n  // eslint-disable-next-line no-restricted-globals\r\n  let target = worker || self;\r\n\r\n  if (!EventDispatcher.isObject(target)) {\r\n    target = new Worker(String(worker));\r\n  }\r\n\r\n  return target;\r\n};\r\n\r\n/**\r\n *\r\n * @param target {Worker|String}\r\n * @param receiverEventPreprocessor {?Function}\r\n * @param senderEventPreprocessor {?Function}\r\n * @extends MessagePortDispatcher\r\n * @constructor\r\n */\r\nclass DedicatedWorkerDispatcher extends AbstractDispatcher {\r\n  constructor(worker, receiverEventPreprocessor, senderEventPreprocessor) {\r\n    super(WorkerType.DEDICATED_WORKER);\r\n\r\n    const target = getTarget(worker);\r\n\r\n    this.initialize(target, receiverEventPreprocessor, senderEventPreprocessor);\r\n    dispatchWorkerEvents(target, this.receiver);\r\n  }\r\n\r\n  terminate() {\r\n    return this.target.terminate();\r\n  }\r\n}\r\n\r\nexport default DedicatedWorkerDispatcher;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/DedicatedWorkerDispatcher.js","import EventDispatcher from 'event-dispatcher';\r\nimport WorkerType from './WorkerType';\r\nimport { dispatchWorkerErrorEvent } from './WorkerEvent';\r\nimport AbstractDispatcher from './AbstractDispatcher';\r\n\r\nconst getTarget = (target, name) => {\r\n  if (!EventDispatcher.isObject(target)) {\r\n    return new SharedWorker(String(target), name);\r\n  }\r\n\r\n  return target;\r\n};\r\n\r\n/**\r\n *\r\n * @param worker {SharedWorker}\r\n * @param name {String}\r\n * @param receiverEventPreprocessor {?Function}\r\n * @param senderEventPreprocessor {?Function}\r\n * @extends WorkerMessenger\r\n * @constructor\r\n */\r\nclass SharedWorkerDispatcher extends AbstractDispatcher {\r\n  constructor(target, name, receiverEventPreprocessor, senderEventPreprocessor) {\r\n    super(WorkerType.SHARED_WORKER);\r\n    this.worker = getTarget(target, name);\r\n\r\n    this.initialize(this.worker.port, null, receiverEventPreprocessor, senderEventPreprocessor);\r\n    dispatchWorkerErrorEvent(this.worker, this.receiver);\r\n  }\r\n\r\n  start() {\r\n    this.target.start();\r\n  }\r\n\r\n  close() {\r\n    this.target.close();\r\n  }\r\n}\r\n\r\nexport default SharedWorkerDispatcher;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/SharedWorkerDispatcher.js","import EventDispatcher from 'event-dispatcher';\r\nimport WorkerType from '../WorkerType';\r\nimport WorkerEvent, { dispatchWorkerEvents } from '../WorkerEvent';\r\nimport ClientDispatcher from './ClientDispatcher';\r\n\r\n/**\r\n * Read-only interface, mainly will listen to \"connect\" event.\r\n * You should listen to WorkerEvent.CONNECT to intercept client\r\n * instance to be able to communicate.\r\n * @param worker\r\n * @param receiverEventPreprocessor {?Function}\r\n * @constructor\r\n */\r\nclass ServerDispatcher {\r\n  constructor(\r\n    target,\r\n    receiverEventPreprocessor,\r\n    clientReceiverEventPreprocessor,\r\n    clientSenderEventPreprocessor,\r\n  ) {\r\n    // eslint-disable-next-line no-restricted-globals\r\n    this.target = target || self;\r\n    this.clientReceiverEventPreprocessor = clientReceiverEventPreprocessor;\r\n    this.clientSenderEventPreprocessor = clientSenderEventPreprocessor;\r\n    this.type = WorkerType.SHARED_WORKER_SERVER;\r\n    this.receiver = new EventDispatcher(receiverEventPreprocessor);\r\n\r\n    this.target.addEventListener('connect', this.handleConnect);\r\n    dispatchWorkerEvents(this.target, this.receiver);\r\n  }\r\n\r\n  addEventListener = (...args) => this.receiver.addEventListener(...args);\r\n  hasEventListener = (...args) => this.receiver.hasEventListener(...args);\r\n  removeEventListener = (...args) => this.receiver.removeEventListener(...args);\r\n  removeAllEventListeners = (...args) => this.receiver.removeAllEventListeners(...args);\r\n\r\n  handleConnect = (event) => {\r\n    const [target] = event.ports;\r\n    const client = new ClientDispatcher(\r\n      target,\r\n      this.clientReceiverEventPreprocessor,\r\n      this.clientSenderEventPreprocessor,\r\n    );\r\n\r\n    this.receiver.dispatchEvent(new WorkerEvent(WorkerEvent.CONNECT, client, event, client));\r\n  }\r\n}\r\n\r\nexport default ServerDispatcher;\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/sharedWorker/ServerDispatcher.js","import WorkerType from './WorkerType';\r\nimport WorkerEvent from './WorkerEvent';\r\nimport DedicatedWorkerDispatcher from './DedicatedWorkerDispatcher';\r\nimport SharedWorkerDispatcher from './SharedWorkerDispatcher';\r\nimport ClientDispatcher from './sharedWorker/ClientDispatcher';\r\nimport ServerDispatcher from './sharedWorker/ServerDispatcher';\r\nimport { create, createForSelf } from './utils/create';\r\n\r\n\r\nconst CONNECT_EVENT = WorkerEvent.CONNECT;\r\nconst { DEDICATED_WORKER } = WorkerType;\r\nconst { SHARED_WORKER } = WorkerType;\r\n\r\nexport default DedicatedWorkerDispatcher;\r\n\r\nexport {\r\n  create,\r\n  createForSelf,\r\n  CONNECT_EVENT,\r\n  DEDICATED_WORKER,\r\n  SHARED_WORKER,\r\n  WorkerEvent,\r\n  WorkerType,\r\n  ClientDispatcher,\r\n  ServerDispatcher,\r\n  SharedWorkerDispatcher,\r\n  DedicatedWorkerDispatcher,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/index.js","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"MessagePortDispatcher\"] = factory();\r\n\telse\r\n\t\troot[\"MessagePortDispatcher\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.create = exports.self = exports.MessagePortEvent = undefined;\r\n\r\nvar _MessagePortDispatcher = __webpack_require__(1);\r\n\r\nvar _MessagePortDispatcher2 = _interopRequireDefault(_MessagePortDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nvar self = _MessagePortDispatcher2.default.self,\r\n    create = _MessagePortDispatcher2.default.create;\r\nexports.default = _MessagePortDispatcher2.default;\r\nexports.MessagePortEvent = _MessagePortDispatcher.MessagePortEvent;\r\nexports.self = self;\r\nexports.create = create;\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.MessagePortDispatcher = exports.MessagePortEvent = undefined;\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by Oleg Galaburda on 09.02.16.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\r\n\r\nvar _eventDispatcher = __webpack_require__(2);\r\n\r\nvar _eventDispatcher2 = _interopRequireDefault(_eventDispatcher);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar MessagePortEvent = exports.MessagePortEvent = function () {\r\n  function MessagePortEvent(event, dispatcherId) {\r\n    _classCallCheck(this, MessagePortEvent);\r\n\r\n    this.event = event;\r\n    this.dispatcherId = dispatcherId;\r\n  }\r\n\r\n  _createClass(MessagePortEvent, [{\r\n    key: 'toJSON',\r\n    value: function toJSON() {\r\n      return {\r\n        /* eslint no-use-before-define:0 */\r\n        event: MessagePortDispatcher.toJSON(this.event),\r\n        dispatcherId: this.dispatcherId\r\n      };\r\n    }\r\n  }], [{\r\n    key: 'parse',\r\n    value: function parse(object) {\r\n      /* eslint no-use-before-define:0 */\r\n      var result = MessagePortDispatcher.parse(object);\r\n      if (MessagePortEvent.isEvent(result)) {\r\n        /* eslint no-use-before-define:0 */\r\n        result.event = MessagePortDispatcher.parse(result.event);\r\n      } else {\r\n        result = null;\r\n      }\r\n      return result;\r\n    }\r\n  }, {\r\n    key: 'isEvent',\r\n    value: function isEvent(object) {\r\n      return _eventDispatcher2.default.isObject(object) && Object.prototype.hasOwnProperty.call(object, 'dispatcherId') && Object.prototype.hasOwnProperty.call(object, 'event');\r\n    }\r\n  }]);\r\n\r\n  return MessagePortEvent;\r\n}();\r\n\r\nvar MessagePortDispatcher = exports.MessagePortDispatcher = function (_EventDispatcher) {\r\n  _inherits(MessagePortDispatcher, _EventDispatcher);\r\n\r\n  /**\r\n   *\r\n   * @param target {Window|Worker|MessagePort}\r\n   * @param customPostMessageHandler {?Function} Function that receive message object\r\n   *        and pass it to MessagePort.postMessage()\r\n   * @param receiverEventPreprocessor {?Function} Function that pre-process\r\n   *        all events received from MessagePort, before passing to listeners\r\n   * @param senderEventPreprocessor Function that pre-process all events sent\r\n   *        to MessagePort\r\n   * @constructor\r\n   */\r\n  function MessagePortDispatcher(target) {\r\n    var customPostMessageHandler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\r\n    var receiverEventPreprocessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\r\n    var senderEventPreprocessor = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\r\n    var noInit = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\r\n\r\n    _classCallCheck(this, MessagePortDispatcher);\r\n\r\n    var _this = _possibleConstructorReturn(this, (MessagePortDispatcher.__proto__ || Object.getPrototypeOf(MessagePortDispatcher)).call(this, null, true));\r\n\r\n    if (!noInit) {\r\n      _this.initialize(target, customPostMessageHandler, receiverEventPreprocessor, senderEventPreprocessor);\r\n    }\r\n    return _this;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n\r\n\r\n  _createClass(MessagePortDispatcher, [{\r\n    key: 'initialize',\r\n    value: function initialize(target, customPostMessageHandler, receiverEventPreprocessor, senderEventPreprocessor) {\r\n      this.target = target || self;\r\n      this._handlers = {\r\n        customPostMessageHandler: customPostMessageHandler,\r\n        senderEventPreprocessor: senderEventPreprocessor\r\n      };\r\n      this.sender = _eventDispatcher2.default.create();\r\n      this.receiver = _eventDispatcher2.default.create(receiverEventPreprocessor);\r\n      this.dispatcherId = 'MP/' + Math.ceil(Math.random() * 10000) + '/' + Date.now();\r\n      this.targetOrigin = '*';\r\n      this.addEventListener = this.receiver.addEventListener.bind(this.receiver);\r\n      this.hasEventListener = this.receiver.hasEventListener.bind(this.receiver);\r\n      this.removeEventListener = this.receiver.removeEventListener.bind(this.receiver);\r\n      this.removeAllEventListeners = this.receiver.removeAllEventListeners.bind(this.receiver);\r\n\r\n      target.addEventListener('message', this._messageEventListener.bind(this));\r\n    }\r\n  }, {\r\n    key: 'dispatchEvent',\r\n    value: function dispatchEvent(eventType, data, transferList) {\r\n      var event = _eventDispatcher2.default.getEvent(eventType, data);\r\n      if (this._handlers.senderEventPreprocessor) {\r\n        event = this._handlers.senderEventPreprocessor.call(this, event);\r\n      }\r\n      var eventJson = MessagePortDispatcher.toJSON(new MessagePortEvent(event, this.dispatcherId));\r\n      this._postMessageHandler(eventJson, transferList);\r\n    }\r\n  }, {\r\n    key: '_postMessageHandler',\r\n    value: function _postMessageHandler(data, transferList) {\r\n      var handler = this._handlers.customPostMessageHandler;\r\n      if (handler) {\r\n        handler.call(this, data, this.targetOrigin, transferList);\r\n      } else {\r\n        this.target.postMessage(data, this.targetOrigin, transferList);\r\n      }\r\n    }\r\n  }, {\r\n    key: '_messageEventListener',\r\n    value: function _messageEventListener(event) {\r\n      // fixme .nativeEvent react-native thing, need a way to find out keep it or exclude\r\n      event = event.nativeEvent || event;\r\n      var message = MessagePortEvent.parse(event.data);\r\n      if (message) {\r\n        if (message.dispatcherId === this.dispatcherId) {\r\n          this.sender.dispatchEvent(message.event);\r\n        } else {\r\n          this.receiver.dispatchEvent(message.event);\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * If toJSON method implemented on object, it will be called instead of converting to JSON string.\r\n     * This was made to utilize structured cloning algorithm for raw objects.\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\r\n     * In this case developer is responsible for converting linked objects.\r\n     * @param object\r\n     * @returns {Object|String}\r\n     */\r\n\r\n  }], [{\r\n    key: 'toJSON',\r\n    value: function toJSON(object) {\r\n      var objectJson = void 0;\r\n      if (typeof object.toJSON === 'function') {\r\n        objectJson = object.toJSON();\r\n      } else {\r\n        objectJson = JSON.stringify(object);\r\n      }\r\n      return objectJson;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param data {Object|String}\r\n     * @returns {Object}\r\n     */\r\n\r\n  }, {\r\n    key: 'parse',\r\n    value: function parse(data) {\r\n      var object = void 0; // keep it undefined in case of error\r\n      if (_eventDispatcher2.default.isObject(data)) {\r\n        object = data;\r\n      } else {\r\n        try {\r\n          object = JSON.parse(data);\r\n        } catch (error) {\r\n          // this isn't an event we are waiting for.\r\n        }\r\n      }\r\n      return object;\r\n    }\r\n  }, {\r\n    key: 'create',\r\n    value: function create(target, customPostMessageHandler, receiverEventPreprocessor, senderEventPreprocessor) {\r\n      return new MessagePortDispatcher(target, customPostMessageHandler, receiverEventPreprocessor, senderEventPreprocessor);\r\n    }\r\n  }]);\r\n\r\n  return MessagePortDispatcher;\r\n}(_eventDispatcher2.default);\r\n\r\nvar factory = function factory(getTarget) {\r\n  var dispatcher = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\r\n  return function () {\r\n    if (!dispatcher) {\r\n      dispatcher = MessagePortDispatcher.create(getTarget());\r\n    }\r\n    return dispatcher;\r\n  };\r\n};\r\n\r\nMessagePortDispatcher.self = factory(function () {\r\n  return self;\r\n});\r\nMessagePortDispatcher.parent = factory(function () {\r\n  return parent;\r\n});\r\nMessagePortDispatcher.top = factory(function () {\r\n  return top;\r\n});\r\nMessagePortDispatcher.MessagePortEvent = MessagePortEvent;\r\n\r\nexports.default = MessagePortDispatcher;\r\n\r\n/***/ }),\r\n/* 2 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\r\n\r\nvar _typeof2 = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n  if (( false ? 'undefined' : _typeof2(exports)) === 'object' && ( false ? 'undefined' : _typeof2(module)) === 'object') module.exports = factory();else if (true) !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\r\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\r\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\r\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else if ((typeof exports === 'undefined' ? 'undefined' : _typeof2(exports)) === 'object') exports[\"EventDispatcher\"] = factory();else root[\"EventDispatcher\"] = factory();\r\n})(undefined, function () {\r\n  return (/******/function (modules) {\r\n      // webpackBootstrap\r\n      /******/ // The module cache\r\n      /******/var installedModules = {};\r\n      /******/\r\n      /******/ // The require function\r\n      /******/function __webpack_require__(moduleId) {\r\n        /******/\r\n        /******/ // Check if module is in cache\r\n        /******/if (installedModules[moduleId]) {\r\n          /******/return installedModules[moduleId].exports;\r\n          /******/\r\n        }\r\n        /******/ // Create a new module (and put it into the cache)\r\n        /******/var module = installedModules[moduleId] = {\r\n          /******/i: moduleId,\r\n          /******/l: false,\r\n          /******/exports: {}\r\n          /******/ };\r\n        /******/\r\n        /******/ // Execute the module function\r\n        /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n        /******/\r\n        /******/ // Flag the module as loaded\r\n        /******/module.l = true;\r\n        /******/\r\n        /******/ // Return the exports of the module\r\n        /******/return module.exports;\r\n        /******/\r\n      }\r\n      /******/\r\n      /******/\r\n      /******/ // expose the modules object (__webpack_modules__)\r\n      /******/__webpack_require__.m = modules;\r\n      /******/\r\n      /******/ // expose the module cache\r\n      /******/__webpack_require__.c = installedModules;\r\n      /******/\r\n      /******/ // define getter function for harmony exports\r\n      /******/__webpack_require__.d = function (exports, name, getter) {\r\n        /******/if (!__webpack_require__.o(exports, name)) {\r\n          /******/Object.defineProperty(exports, name, {\r\n            /******/configurable: false,\r\n            /******/enumerable: true,\r\n            /******/get: getter\r\n            /******/ });\r\n          /******/\r\n        }\r\n        /******/\r\n      };\r\n      /******/\r\n      /******/ // getDefaultExport function for compatibility with non-harmony modules\r\n      /******/__webpack_require__.n = function (module) {\r\n        /******/var getter = module && module.__esModule ?\r\n        /******/function getDefault() {\r\n          return module['default'];\r\n        } :\r\n        /******/function getModuleExports() {\r\n          return module;\r\n        };\r\n        /******/__webpack_require__.d(getter, 'a', getter);\r\n        /******/return getter;\r\n        /******/\r\n      };\r\n      /******/\r\n      /******/ // Object.prototype.hasOwnProperty.call\r\n      /******/__webpack_require__.o = function (object, property) {\r\n        return Object.prototype.hasOwnProperty.call(object, property);\r\n      };\r\n      /******/\r\n      /******/ // __webpack_public_path__\r\n      /******/__webpack_require__.p = \"http://localhost:8081/dist/\";\r\n      /******/\r\n      /******/ // Load entry module and return exports\r\n      /******/return __webpack_require__(__webpack_require__.s = 0);\r\n      /******/\r\n    }(\r\n    /************************************************************************/\r\n    /******/[\r\n    /* 0 */\r\n    /***/function (module, exports, __webpack_require__) {\r\n\r\n      \"use strict\";\r\n\r\n      Object.defineProperty(exports, \"__esModule\", {\r\n        value: true\r\n      });\r\n      exports.Event = undefined;\r\n\r\n      var _EventDispatcher = __webpack_require__(1);\r\n\r\n      var _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\r\n\r\n      function _interopRequireDefault(obj) {\r\n        return obj && obj.__esModule ? obj : { default: obj };\r\n      }\r\n\r\n      exports.default = _EventDispatcher2.default;\r\n      exports.Event = _EventDispatcher.Event;\r\n\r\n      /***/\r\n    },\r\n    /* 1 */\r\n    /***/function (module, exports, __webpack_require__) {\r\n\r\n      \"use strict\";\r\n\r\n      Object.defineProperty(exports, \"__esModule\", {\r\n        value: true\r\n      });\r\n\r\n      var _typeof = typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\" ? function (obj) {\r\n        return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\r\n      } : function (obj) {\r\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);\r\n      };\r\n\r\n      var _createClass = function () {\r\n        function defineProperties(target, props) {\r\n          for (var i = 0; i < props.length; i++) {\r\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\r\n          }\r\n        }return function (Constructor, protoProps, staticProps) {\r\n          if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\r\n        };\r\n      }();\r\n\r\n      function _classCallCheck(instance, Constructor) {\r\n        if (!(instance instanceof Constructor)) {\r\n          throw new TypeError(\"Cannot call a class as a function\");\r\n        }\r\n      }\r\n\r\n      var hasOwnProp = function hasOwnProp(target, name) {\r\n        return Object.prototype.hasOwnProperty.call(target, name);\r\n      }; /**\r\n          * Created by Oleg Galaburda on 09.02.16.\r\n          * \r\n          */\r\n\r\n      var Event = exports.Event = function () {\r\n        function Event(type, data) {\r\n          _classCallCheck(this, Event);\r\n\r\n          this.type = type;\r\n          this.data = data || null;\r\n          this.defaultPrevented = false;\r\n        }\r\n\r\n        _createClass(Event, [{\r\n          key: 'toJSON',\r\n          value: function toJSON() {\r\n            return { type: this.type, data: this.data };\r\n          }\r\n        }, {\r\n          key: 'isDefaultPrevented',\r\n          value: function isDefaultPrevented() {\r\n            return this.defaultPrevented;\r\n          }\r\n        }, {\r\n          key: 'preventDefault',\r\n          value: function preventDefault() {\r\n            this.defaultPrevented = true;\r\n          }\r\n        }]);\r\n\r\n        return Event;\r\n      }();\r\n\r\n      var ListenersRunner = function () {\r\n        function ListenersRunner(listeners, onStopped, onComplete) {\r\n          var _this = this;\r\n\r\n          _classCallCheck(this, ListenersRunner);\r\n\r\n          this.index = -1;\r\n          this.immediatelyStopped = false;\r\n\r\n          this.stopImmediatePropagation = function () {\r\n            _this.immediatelyStopped = true;\r\n          };\r\n\r\n          this.listeners = listeners;\r\n          this.onStopped = onStopped;\r\n          this.onComplete = onComplete;\r\n        }\r\n\r\n        _createClass(ListenersRunner, [{\r\n          key: 'run',\r\n          value: function run(event, target) {\r\n            var listener = void 0;\r\n            var listeners = this.listeners;\r\n\r\n            this.augmentEvent(event);\r\n            // TODO this has to be handled in separate object ListenersRunner that should be\r\n            // created for each call() call and asked for index validation on each listener remove.\r\n            for (this.index = 0; this.index < listeners.length; this.index++) {\r\n              if (this.immediatelyStopped) break;\r\n              listener = listeners[this.index];\r\n              listener.call(target, event);\r\n            }\r\n            this.clearEvent(event);\r\n            this.onComplete(this);\r\n          }\r\n        }, {\r\n          key: 'augmentEvent',\r\n          value: function augmentEvent(eventObject) {\r\n            var event = eventObject;\r\n            event.stopPropagation = this.onStopped;\r\n            event.stopImmediatePropagation = this.stopImmediatePropagation;\r\n          }\r\n\r\n          /* eslint class-methods-use-this: \"off\" */\r\n\r\n        }, {\r\n          key: 'clearEvent',\r\n          value: function clearEvent(eventObject) {\r\n            var event = eventObject;\r\n            delete event.stopPropagation;\r\n            delete event.stopImmediatePropagation;\r\n          }\r\n        }, {\r\n          key: 'listenerRemoved',\r\n          value: function listenerRemoved(listeners, index) {\r\n            if (listeners === this.listeners && index <= this.index) {\r\n              this.index--;\r\n            }\r\n          }\r\n        }]);\r\n\r\n        return ListenersRunner;\r\n      }();\r\n\r\n      var EventListeners = function () {\r\n        function EventListeners() {\r\n          var _this2 = this;\r\n\r\n          _classCallCheck(this, EventListeners);\r\n\r\n          this._listeners = {};\r\n          this._runners = [];\r\n\r\n          this.removeRunner = function (runner) {\r\n            _this2._runners.splice(_this2._runners.indexOf(runner), 1);\r\n          };\r\n        }\r\n        /**\r\n         * key - event Type\r\n         * value - hash of priorities\r\n         *    key - priority\r\n         *    value - list of handlers\r\n         * @type {Object<string, Object.<string, Array<number, Function>>>}\r\n         * @private\r\n         */\r\n\r\n        _createClass(EventListeners, [{\r\n          key: 'createList',\r\n          value: function createList(eventType, priorityOpt) {\r\n            var priority = parseInt(priorityOpt, 10);\r\n            var target = this.getPrioritiesByKey(eventType);\r\n            var key = String(priority);\r\n            var value = void 0;\r\n            if (hasOwnProp(target, key)) {\r\n              value = target[key];\r\n            } else {\r\n              value = [];\r\n              target[key] = value;\r\n            }\r\n            return value;\r\n          }\r\n        }, {\r\n          key: 'getPrioritiesByKey',\r\n          value: function getPrioritiesByKey(key) {\r\n            var value = void 0;\r\n            if (hasOwnProp(this._listeners, key)) {\r\n              value = this._listeners[key];\r\n            } else {\r\n              value = {};\r\n              this._listeners[key] = value;\r\n            }\r\n            return value;\r\n          }\r\n        }, {\r\n          key: 'add',\r\n          value: function add(eventType, handler, priority) {\r\n            var handlers = this.createList(eventType, priority);\r\n            if (handlers.indexOf(handler) < 0) {\r\n              handlers.push(handler);\r\n            }\r\n          }\r\n        }, {\r\n          key: 'has',\r\n          value: function has(eventType) {\r\n            var priority = void 0;\r\n            var result = false;\r\n            var priorities = this.getPrioritiesByKey(eventType);\r\n            if (priorities) {\r\n              for (priority in priorities) {\r\n                if (hasOwnProp(priorities, priority)) {\r\n                  result = true;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n            return result;\r\n          }\r\n        }, {\r\n          key: 'remove',\r\n          value: function remove(eventType, handler) {\r\n            var _this3 = this;\r\n\r\n            var priorities = this.getPrioritiesByKey(eventType);\r\n            if (priorities) {\r\n              var list = Object.getOwnPropertyNames(priorities);\r\n              var length = list.length;\r\n\r\n              var _loop = function _loop(index) {\r\n                var priority = list[index];\r\n                var handlers = priorities[priority];\r\n                var handlerIndex = handlers.indexOf(handler);\r\n                if (handlerIndex >= 0) {\r\n                  handlers.splice(handlerIndex, 1);\r\n                  if (!handlers.length) {\r\n                    delete priorities[priority];\r\n                  }\r\n                  _this3._runners.forEach(function (runner) {\r\n                    runner.listenerRemoved(handlers, handlerIndex);\r\n                  });\r\n                }\r\n              };\r\n\r\n              for (var index = 0; index < length; index++) {\r\n                _loop(index);\r\n              }\r\n            }\r\n          }\r\n        }, {\r\n          key: 'removeAll',\r\n          value: function removeAll(eventType) {\r\n            delete this._listeners[eventType];\r\n          }\r\n        }, {\r\n          key: 'createRunner',\r\n          value: function createRunner(handlers, onStopped) {\r\n            var runner = new ListenersRunner(handlers, onStopped, this.removeRunner);\r\n            this._runners.push(runner);\r\n            return runner;\r\n          }\r\n        }, {\r\n          key: 'call',\r\n          value: function call(event, target) {\r\n            var priorities = this.getPrioritiesByKey(event.type);\r\n            var stopped = false;\r\n            var stopPropagation = function stopPropagation() {\r\n              stopped = true;\r\n            };\r\n            if (priorities) {\r\n              // getOwnPropertyNames() or keys()?\r\n              var list = Object.getOwnPropertyNames(priorities).sort(function (a, b) {\r\n                return a - b;\r\n              });\r\n              var length = list.length;\r\n\r\n              for (var index = 0; index < length; index++) {\r\n                if (stopped) break;\r\n                var _handlers = priorities[list[index]];\r\n                // in case if all handlers of priority were removed while event\r\n                // was dispatched and handlers become undefined.\r\n                if (_handlers) {\r\n                  var _runner = this.createRunner(_handlers, stopPropagation);\r\n                  _runner.run(event, target);\r\n                  if (_runner.immediatelyStopped) break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }]);\r\n\r\n        return EventListeners;\r\n      }();\r\n\r\n      var EventDispatcher = function () {\r\n        function EventDispatcher(eventPreprocessor) {\r\n          var noInit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n          _classCallCheck(this, EventDispatcher);\r\n\r\n          if (!noInit) {\r\n            this.initialize(eventPreprocessor);\r\n          }\r\n        }\r\n\r\n        /**\r\n         * @private\r\n         */\r\n\r\n        _createClass(EventDispatcher, [{\r\n          key: 'initialize',\r\n          value: function initialize(eventPreprocessor) {\r\n            this._eventPreprocessor = eventPreprocessor;\r\n            this._listeners = new EventListeners();\r\n          }\r\n        }, {\r\n          key: 'addEventListener',\r\n          value: function addEventListener(eventType, listener) {\r\n            var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n            this._listeners.add(eventType, listener, -priority || 0);\r\n          }\r\n        }, {\r\n          key: 'hasEventListener',\r\n          value: function hasEventListener(eventType) {\r\n            return this._listeners.has(eventType);\r\n          }\r\n        }, {\r\n          key: 'removeEventListener',\r\n          value: function removeEventListener(eventType, listener) {\r\n            this._listeners.remove(eventType, listener);\r\n          }\r\n        }, {\r\n          key: 'removeAllEventListeners',\r\n          value: function removeAllEventListeners(eventType) {\r\n            this._listeners.removeAll(eventType);\r\n          }\r\n        }, {\r\n          key: 'dispatchEvent',\r\n          value: function dispatchEvent(event, data) {\r\n            var eventObject = EventDispatcher.getEvent(event, data);\r\n            if (this._eventPreprocessor) {\r\n              eventObject = this._eventPreprocessor.call(this, eventObject);\r\n            }\r\n            this._listeners.call(eventObject);\r\n          }\r\n        }], [{\r\n          key: 'isObject',\r\n          value: function isObject(value) {\r\n            return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;\r\n          }\r\n        }, {\r\n          key: 'getEvent',\r\n          value: function getEvent(eventOrType, optionalData) {\r\n            var event = eventOrType;\r\n            if (!EventDispatcher.isObject(eventOrType)) {\r\n              event = new EventDispatcher.Event(String(eventOrType), optionalData);\r\n            }\r\n            return event;\r\n          }\r\n        }, {\r\n          key: 'create',\r\n          value: function create(eventPreprocessor) {\r\n            return new EventDispatcher(eventPreprocessor);\r\n          }\r\n\r\n          /* eslint no-undef: \"off\" */\r\n\r\n        }]);\r\n\r\n        return EventDispatcher;\r\n      }();\r\n\r\n      EventDispatcher.Event = Event;\r\n\r\n      exports.default = EventDispatcher;\r\n\r\n      /***/\r\n    }]\r\n    /******/)\r\n  );\r\n});\r\n//# sourceMappingURL=event-dispatcher.js.map\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))\r\n\r\n/***/ }),\r\n/* 3 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nmodule.exports = function (module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function () {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function get() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function get() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\r\n/***/ })\r\n/******/ ]);\r\n});\r\n//# sourceMappingURL=messageport-dispatcher.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/messageport-dispatcher/dist/messageport-dispatcher.js\n// module id = 9\n// module chunks = 0","import WorkerType from '../WorkerType';\r\nimport DedicatedWorkerDispatcher from '../DedicatedWorkerDispatcher';\r\nimport SharedWorkerDispatcher from '../SharedWorkerDispatcher';\r\nimport ClientDispatcher from '../sharedWorker/ClientDispatcher';\r\nimport ServerDispatcher from '../sharedWorker/ServerDispatcher';\r\n\r\n/**\r\n *\r\n * @param worker {String|Worker|SharedWorker|MessagePort}\r\n * @param type {String}\r\n * @param receiverEventPreprocessor {?Function}\r\n * @param senderEventPreprocessor {?Function}\r\n * @returns {AbstractDispatcher}\r\n */\r\nexport const create = (target, type, receiverEventPreprocessor, senderEventPreprocessor) => {\r\n  let dispatcher = null;\r\n  switch (type) {\r\n    default:\r\n    case WorkerType.DEDICATED_WORKER:\r\n      dispatcher = new DedicatedWorkerDispatcher(\r\n        target,\r\n        receiverEventPreprocessor,\r\n        senderEventPreprocessor,\r\n      );\r\n      break;\r\n    case WorkerType.SHARED_WORKER:\r\n      dispatcher = new SharedWorkerDispatcher(\r\n        target,\r\n        null,\r\n        receiverEventPreprocessor,\r\n        senderEventPreprocessor,\r\n      );\r\n      break;\r\n    case WorkerType.SHARED_WORKER_SERVER:\r\n      dispatcher = new ServerDispatcher(\r\n        target,\r\n        receiverEventPreprocessor,\r\n      );\r\n      break;\r\n    case WorkerType.SHARED_WORKER_CLIENT:\r\n      dispatcher = new ClientDispatcher(\r\n        target,\r\n        receiverEventPreprocessor,\r\n        senderEventPreprocessor,\r\n      );\r\n      break;\r\n  }\r\n  return dispatcher;\r\n};\r\n\r\n/**\r\n *\r\n * @param receiverEventPreprocessor {?Function}\r\n * @param senderEventPreprocessor {?Function}\r\n * @returns {AbstractDispatcher}\r\n */\r\nexport const createForSelf = (receiverEventPreprocessor, senderEventPreprocessor) => {\r\n  /* eslint-disable no-restricted-globals */\r\n  let dispatcher = null;\r\n  if (typeof (self.postMessage) === 'function') {\r\n    dispatcher = new DedicatedWorkerDispatcher(\r\n      self,\r\n      receiverEventPreprocessor,\r\n      senderEventPreprocessor,\r\n    );\r\n  } else {\r\n    dispatcher = new ServerDispatcher(\r\n      self,\r\n      receiverEventPreprocessor,\r\n    );\r\n  }\r\n  return dispatcher;\r\n  /* eslint-enable no-restricted-globals */\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/utils/create.js"],"sourceRoot":""}